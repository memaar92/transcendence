<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API-Dokumentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        code {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 2px 5px;
            font-family: 'Courier New', Courier, monospace;
        }
        pre {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 10px;
            overflow-x: auto;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h1>API-Dokumentation</h1>

    <h2>Übersicht</h2>
    <p>Diese API bietet Endpunkte für Benutzerverwaltung und Spielverlaufsverfolgung. Sie umfasst Funktionen zur Benutzerregistrierung, Abruf und Änderung von Benutzerdaten sowie zum Abrufen des Spielverlaufs.</p>

    <h2>Basis-URL</h2>
    <pre><code>http://&lt;ihre-domain&gt;/api/</code></pre>

    <h2>Endpunkte</h2>

    <h3>Benutzerverwaltung</h3>

    <h4>Benutzer erstellen</h4>
    <ul>
        <li><strong>URL:</strong> <code>/api/user/register/</code></li>
        <li><strong>Methode:</strong> POST</li>
        <li><strong>Beschreibung:</strong> Registriert einen neuen Benutzer.</li>
        <li><strong>Anfragekörper:</strong></li>
    </ul>
    <pre><code>{
  "username": "string",
  "password": "string",
  "email": "string",
  "first_name": "string",
  "last_name": "string"
}</code></pre>
    <ul>
        <li><strong>Antwort:</strong></li>
    </ul>
    <pre><code>// Erfolg (201 Created)
{
  "id": "integer",
  "username": "string",
  "email": "string",
  "first_name": "string",
  "last_name": "string"
}

// Fehler (400 Bad Request)
{
  "error": "string"
}</code></pre>

    <h4>Benutzer abrufen, aktualisieren oder löschen</h4>
    <ul>
        <li><strong>URL:</strong> <code>/api/users/&lt;int:pk&gt;/</code></li>
        <li><strong>Methode:</strong> GET, PUT, DELETE</li>
        <li><strong>Beschreibung:</strong> Ruft Benutzerdaten ab, aktualisiert oder löscht sie.</li>
        <li><strong>Berechtigungen:</strong> Nur authentifizierte Benutzer</li>
        <li><strong>Antworten:</strong></li>
    </ul>
    <pre><code>// GET (200 OK)
// Wenn der authentifizierte Benutzer seine eigenen Daten anfordert:
{
  "id": "integer",
  "username": "string",
  "email": "string",
  "first_name": "string",
  "last_name": "string"
}

// Wenn der authentifizierte Benutzer die Daten eines anderen Benutzers anfordert:
{
  "id": "integer",
  "username": "string"
}

// PUT (200 OK)
{
  "id": "integer",
  "username": "string",
  "email": "string",
  "first_name": "string",
  "last_name": "string"
}

// DELETE (204 No Content): Kein Inhalt.</code></pre>

    <h3>Spielverlauf</h3>

    <h4>Spielverlauf auflisten</h4>
    <ul>
        <li><strong>URL:</strong> <code>/api/games/</code></li>
        <li><strong>Methode:</strong> GET</li>
        <li><strong>Beschreibung:</strong> Ruft die Liste aller Spielverläufe ab.</li>
        <li><strong>Antwort:</strong></li>
    </ul>
    <pre><code>// Erfolg (200 OK)
[
  {
    "id": "integer",
    "home_id": "integer",
    "visitor_id": "integer",
    "visitor_score": "integer",
    "home_score": "integer",
    "created_at": "datetime",
    "updated_at": "datetime"
  },
  ...
]</code></pre>

    <h2>Modelle</h2>

    <h3>UserSerializer</h3>
    <ul>
        <li><strong>Felder:</strong></li>
        <ul>
            <li><code>id</code>: Integer</li>
            <li><code>username</code>: String</li>
            <li><code>password</code>: String (nur schreibbar)</li>
            <li><code>email</code>: String</li>
            <li><code>first_name</code>: String</li>
            <li><code>last_name</code>: String</li>
        </ul>
    </ul>

    <h3>UserNameSerializer</h3>
    <ul>
        <li><strong>Felder:</strong></li>
        <ul>
            <li><code>id</code>: Integer</li>
            <li><code>username</code>: String</li>
        </ul>
    </ul>

    <h3>GameHistorySerializer</h3>
    <ul>
        <li><strong>Felder:</strong></li>
        <ul>
            <li><code>id</code>: Integer</li>
            <li><code>home_id</code>: Integer</li>
            <li><code>visitor_id</code>: Integer</li>
            <li><code>visitor_score</code>: Integer</li>
            <li><code>home_score</code>: Integer</li>
            <li><code>created_at</code>: DateTime</li>
            <li><code>updated_at</code>: DateTime</li>
        </ul>
    </ul>

    <h2>Views</h2>

    <h3>CreateUserView</h3>
    <ul>
        <li><strong>Beschreibung:</strong> Verarbeitet die Benutzerregistrierung.</li>
        <li><strong>Methoden:</strong> POST</li>
        <li><strong>Berechtigungen:</strong> AllowAny</li>
    </ul>

    <h3>ChangeUserView</h3>
    <ul>
        <li><strong>Beschreibung:</strong> Verarbeitet das Abrufen, Aktualisieren und Löschen von Benutzerdaten.</li>
        <li><strong>Methoden:</strong> GET, PUT, DELETE</li>
        <li><strong>Berechtigungen:</strong> IsAuthenticated</li>
    </ul>

    <h3>UserView</h3>
    <ul>
        <li><strong>Beschreibung:</strong> Ruft Benutzerdaten basierend auf der bereitgestellten Benutzer-ID ab.</li>
        <li><strong>Methoden:</strong> GET</li>
        <li><strong>Berechtigungen:</strong> AllowAny</li>
    </ul>

    <h3>GameHistoryList</h3>
    <ul>
        <li><strong>Beschreibung:</strong> Ruft die Liste aller Spielverläufe ab.</li>
        <li><strong>Methoden:</strong> GET</li>
        <li><strong>Berechtigungen:</strong> AllowAny</li>
    </ul>

    <h2>URL-Konfiguration</h2>
    <pre><code>from django.urls import path
from . import views

urlpatterns = [
    path('json/', views.json, name='json'),
    path('games/', views.GameHistoryList.as_view(), name='game-history-list'),
    path('users/&lt;int:pk&gt;/', views.UserView.as_view(), name='user-detail'),
]</code></pre>

    <h2>Hinweise</h2>
    <ul>
        <li>Stellen Sie sicher, dass das Feld <code>password</code> nur schreibbar ist, um die Sicherheit zu gewährleisten.</li>
        <li>Verwenden Sie geeignete Berechtigungen, um Benutzerdaten zu schützen und sicherzustellen, dass nur authentifizierte Benutzer ihre eigenen Daten ändern können.</li>
        <li>Die <code>GameHistoryList</code>-Ansicht erlaubt nur GET-Anfragen zum Abrufen von Spielverlaufsdaten.</li>
    </ul>
</body>
</html>
